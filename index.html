const scenarios = [
    {
        question: "What is signal flow in audio production?",
        options: ["The order of plug-ins in a DAW", "The path an audio signal takes from source to output", "The wiring setup for a MIDI controller", "The way sound travels through a room"],
        correct: 1,
        explanation: "Signal flow is the path that an audio signal takes from the source to the output."
    },
    {
        question: "Which microphone is most sensitive to high-frequency detail and is often used in studio recordings?",
        options: ["Dynamic", "Condenser", "Ribbon", "Lavalier"],
        correct: 1,
        explanation: "Condenser microphones are more sensitive to high-frequency details and are commonly used in studios."
    },
    {
        question: "What is the purpose of the large format console in a recording studio?",
        options: ["To add effects to a recording", "To route and control multiple audio signals", "To serve as a sound interface for MIDI instruments", "To amplify the audio signal for live sound"],
        correct: 1,
        explanation: "Large format consoles are used to route and control multiple audio signals in a recording studio."
    },
    {
        question: "Which of the following best describes dynamic range in audio production?",
        options: ["The difference between the loudest and quietest sounds", "The amount of reverb applied to a signal", "The variation in frequencies captured by a microphone", "The distance between the microphone and sound source"],
        correct: 0,
        explanation: "Dynamic range refers to the difference between the loudest and quietest sounds in a recording."
    },
    {
        question: "What does the term 'overdubbing' refer to in audio production?",
        options: ["Recording multiple instruments at once", "Adding a recording on top of an existing track", "Using multiple mics on one instrument", "Editing tracks in post-production"],
        correct: 1,
        explanation: "Overdubbing is the process of recording additional tracks on top of an existing recording."
    },
    {
        question: "What is the purpose of automation in mixing?",
        options: ["To automate microphone placement", "To allow for changes in volume, panning, and effects over time", "To automatically adjust EQ settings", "To automatically normalize audio levels"],
        correct: 1,
        explanation: "Automation allows for precise changes in volume, panning, and effects at specific points in a mix."
    },
    {
        question: "What is the function of a compressor in audio processing?",
        options: ["Boosts high frequencies", "Reduces dynamic range", "Adds reverb", "Increases volume"],
        correct: 1,
        explanation: "A compressor reduces the dynamic range of audio by attenuating loud sounds and amplifying quieter ones."
    },
    {
        question: "What is latency in digital audio systems?",
        options: ["Delay between input and output", "A type of distortion", "A reverb effect", "An EQ setting"],
        correct: 0,
        explanation: "Latency is the delay between the input and the output of a digital audio system."
    },
    {
        question: "What is a pre-production session in audio recording?",
        options: ["A rehearsal session before the final recording", "The initial setup of audio equipment", "A session to prepare arrangements and logistics before recording", "The testing of instruments before a show"],
        correct: 2,
        explanation: "Pre-production involves planning, arranging, and preparing the logistics for the recording session."
    },
    {
        question: "What is phantom power typically used for?",
        options: ["Powering dynamic microphones", "Powering condenser microphones", "Boosting signal gain", "Reducing noise"],
        correct: 1,
        explanation: "Phantom power is used to power condenser microphones, which require external power to operate."
    },
    {
        question: "What is Pro Tools?",
        options: ["An audio mixing console", "A type of microphone", "A digital audio workstation (DAW)", "A speaker monitor system"],
        correct: 2,
        explanation: "Pro Tools is a digital audio workstation (DAW) widely used for recording, editing, and mixing audio."
    },
    {
        question: "Which console is introduced to students in the MP200 course?",
        options: ["Yamaha CL5", "Solid State Logic 4000 E/G+", "API 1608", "Midas M32"],
        correct: 1,
        explanation: "The Solid State Logic 4000 E/G+ is introduced in MP200 for pre-production, tracking, and mixing."
    },
    {
        question: "Which software is used for surround sound and video game audio in the Multimedia Technologies course?",
        options: ["Pro Tools", "Audiokinetic Wwise", "Ableton Live", "Adobe Audition"],
        correct: 1,
        explanation: "Audiokinetic Wwise is used for surround sound and video game audio in Multimedia Technologies."
    },
    {
        question: "What is the main focus of the Audio Business courses (AB100 and AB200)?",
        options: ["Recording techniques", "Live sound configuration", "Music industry knowledge and business practices", "Mastering techniques"],
        correct: 2,
        explanation: "The Audio Business courses focus on industry knowledge, including copyright law, contracts, and personal finance."
    },
    {
        question: "What does MIDI stand for?",
        options: ["Musical Instrument Digital Interface", "Modular Instrument Data Input", "Multi-Input Dynamic Integration", "Modulation Interface for Digital Instruments"],
        correct: 0,
        explanation: "MIDI stands for Musical Instrument Digital Interface, a protocol that allows electronic instruments and computers to communicate."
    },
    {
        question: "What is the primary use of a pop filter?",
        options: ["To reduce wind noise outdoors", "To prevent plosive sounds from distorting the recording", "To add effects to vocals", "To balance the stereo field"],
        correct: 1,
        explanation: "A pop filter reduces plosive sounds (like 'p' and 'b') from distorting the recording."
    },
    {
        question: "Which of the following best describes clipping in audio production?",
        options: ["Distortion caused by the signal exceeding the maximum level", "A type of reverb effect", "A method of boosting high frequencies", "A technique for editing audio"],
        correct: 0,
        explanation: "Clipping occurs when the signal exceeds the maximum level, causing distortion."
    },
    {
        question: "What is the function of an audio limiter?",
        options: ["Increase volume", "Decrease noise", "Prevent signal from exceeding a set threshold", "Add distortion"],
        correct: 2,
        explanation: "A limiter prevents an audio signal from exceeding a set threshold, thus protecting equipment and preventing distortion."
    },
    {
        question: "What is the purpose of a crossover in an audio system?",
        options: ["Divides the audio signal into different frequency ranges for specific speakers", "Boosts the bass frequencies", "Controls the dynamic range", "Adds reverb to the mix"],
        correct: 0,
        explanation: "A crossover divides the audio signal into different frequency ranges so that each speaker (e.g., subwoofer, tweeter) receives the appropriate frequencies."
    },
    {
        question: "Which mixing technique is commonly used to place audio signals across the stereo field?",
        options: ["Automation", "EQ", "Panning", "Reverb"],
        correct: 2,
        explanation: "Panning is used to place audio signals across the stereo field, providing spatial separation."
    },
    {
        question: "What is a typical use of a gate in audio processing?",
        options: ["Reduce unwanted noise", "Boost signal strength", "Add delay", "Enhance bass frequencies"],
        correct: 0,
        explanation: "A gate reduces or eliminates unwanted noise by attenuating the signal below a certain threshold."
    },
    {
        question: "In a live sound setup, what is the role of a front-of-house (FOH) engineer?",
        options: ["Monitoring the on-stage mix", "Controlling the sound for the audience", "Setting up stage lighting", "Managing wireless frequencies"],
        correct: 1,
        explanation: "The FOH engineer controls the sound that the audience hears during a live performance."
    },
    {
        question: "What is the purpose of an AUX send in a mixing console?",
        options: ["Routing audio to monitors or effects processors", "Boosting the bass frequencies", "Increasing the signal gain", "Reducing latency"],
        correct: 0,
        explanation: "An AUX send is used to route audio to monitors or external effects processors such as reverb or delay units."
    },
    {
        question: "What does dBFS stand for in digital audio?",
        options: ["Decibels Full Scale", "Decibels Frequency Spectrum", "Dynamic Bass Frequency System", "Digital Bandwidth Frequency Shift"],
        correct: 0,
        explanation: "dBFS stands for Decibels Full Scale, a measure of amplitude in digital audio."
    },
    {
        question: "Which microphone polar pattern picks up sound equally from all directions?",
        options: ["Cardioid", "Figure-8", "Omnidirectional", "Hypercardioid"],
        correct: 2,
        explanation: "Omnidirectional microphones pick up sound equally from all directions."
    },
    {
        question: "What is the purpose of an internship during the CRAS program?",
        options: ["To gain practical industry experience", "To prepare final projects", "To work as a live sound engineer", "To learn how to use microphones"],
        correct: 0,
        explanation: "The internship offers students the opportunity to gain practical experience in a real-world audio industry setting."
    },
    {
        question: "What is gain staging in audio production?",
        options: ["Balancing input levels to avoid distortion", "Setting the correct levels for an amplifier", "Adding gain to increase volume", "Removing noise from the signal"],
        correct: 0,
        explanation: "Gain staging refers to adjusting input levels at various stages of the audio signal chain to avoid distortion and optimize headroom."
    },
    {
        question: "What type of microphone is typically used for recording a kick drum?",
        options: ["Condenser", "Ribbon", "Dynamic", "Lavalier"],
        correct: 2,
        explanation: "Dynamic microphones are commonly used for kick drums because they handle high SPLs and provide a tight low-end response."
    },
    {
        question: "What does RT60 measure in acoustics?",
        options: ["Reverberation decay time", "The frequency range of a room", "The loudness of a sound", "The speed of sound in a room"],
        correct: 0,
        explanation: "RT60 measures the time it takes for reverberation to decay by 60 dB."
    },
    {
        question: "What is the difference between balanced and unbalanced cables?",
        options: ["Balanced cables reduce noise by using two conductors, while unbalanced cables use one", "Unbalanced cables are always better for long distances", "Balanced cables increase volume", "Unbalanced cables only work with dynamic microphones"],
        correct: 0,
        explanation: "Balanced cables reduce noise by using two conductors and a ground wire, while unbalanced cables use one conductor and a ground."
    },
    {
        question: "What is a common sampling rate used in professional audio recording?",
        options: ["16 kHz", "44.1 kHz", "32 kHz", "22.05 kHz"],
        correct: 1,
        explanation: "44.1 kHz is a common sampling rate used in professional audio recording."
    },
    {
        question: "Which software is typically used to edit and mix audio in the CRAS program?",
        options: ["Pro Tools", "Logic Pro", "Cubase", "Ableton Live"],
        correct: 0,
        explanation: "Pro Tools is the primary DAW used for editing and mixing in the CRAS program."
    },
    {
        question: "Which frequency range is associated with bass in audio production?",
        options: ["20 Hz to 200 Hz", "200 Hz to 2 kHz", "2 kHz to 10 kHz", "10 kHz to 20 kHz"],
        correct: 0,
        explanation: "Bass frequencies typically range from 20 Hz to 200 Hz."
    },
    {
        question: "What is the function of EQ in audio production?",
        options: ["Boosts signal strength", "Adds reverb to vocals", "Controls the frequency balance of the signal", "Increases the stereo width"],
        correct: 2,
        explanation: "EQ controls the frequency balance of an audio signal by boosting or cutting specific frequency ranges."
    }
    // Add additional questions up to 50 here if needed.
];

let score = 0;
let currentScenarioIndex = 0;
let overallTimer;
let overallTimeLeft = 180; // 3 minutes for the whole game

// Start the game
function startGame() {
    score = 0;
    currentScenarioIndex = 0;
    overallTimeLeft = 180;  // Reset the overall timer
    document.getElementById("score").innerText = `Score: ${score}`;
    document.getElementById("start-button").style.display = "none"; // Hide start button after the game starts

    shuffleScenarios(); // Shuffle the questions order
    startOverallTimer();
    nextScenario();
}

// Shuffle the scenarios array
function shuffleScenarios() {
    for (let i = scenarios.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [scenarios[i], scenarios[j]] = [scenarios[j], scenarios[i]];
    }
}

// Generate a new scenario
function nextScenario() {
    // Hide the "Next" button
    document.getElementById("next-button").style.display = "none";

    // Check if the game is over
    if (currentScenarioIndex >= scenarios.length) {
        alert("Game over! Your final score is " + score);
        return;
    }

    // Update question counter
    document.getElementById("question-counter").innerText = `Question ${currentScenarioIndex + 1}/50`;

    const scenario = scenarios[currentScenarioIndex];
    document.getElementById("question").innerText = scenario.question;
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = ""; // Clear old choices
    document.getElementById("explanation").style.display = "none"; // Hide previous explanation

    // Create buttons for each option
    scenario.options.forEach((option, index) => {
        const button = document.createElement("button");
        button.innerText = option;
        button.onclick = () => checkAnswer(index);
        choicesDiv.appendChild(button);
    });
}

// Check if the selected answer is correct
function checkAnswer(selectedIndex) {
    const scenario = scenarios[currentScenarioIndex];

    // Disable answer buttons after selection
    const buttons = document.querySelectorAll('#choices button');
    buttons.forEach(button => button.disabled = true);

    const explanationElement = document.getElementById("explanation");
    if (selectedIndex === scenario.correct) {
        explanationElement.innerHTML = `<strong>Correct!</strong> ${scenario.explanation}`;
        score += 10;
    } else {
        explanationElement.innerHTML = `<strong>Wrong!</strong> ${scenario.explanation}`;
        score -= 5;
    }

    document.getElementById("score").innerText = `Score: ${score}`;
    explanationElement.style.display = "block";  // Show the explanation
    document.getElementById("next-button").style.display = "block";  // Show "Next" button

    currentScenarioIndex++;
}

// Start the overall game timer (3 minutes total)
function startOverallTimer() {
    const overallTimerBar = document.getElementById("overall-timer-bar");

    clearInterval(overallTimer);
    overallTimer = setInterval(() => {
        const progressPercentage = (overallTimeLeft / 180) * 100;
        overallTimerBar.style.width = progressPercentage + "%";  // Update progress bar width

        if (overallTimeLeft <= 0) {
            clearInterval(overallTimer);  // Stop the timer
            alert("Time's up for the entire game!");
            return;
        }
        overallTimeLeft -= 1;  // Decrease the time left
    }, 1000);
}
